<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Détails de la demande</title>
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        body {
            margin: 0;
            font-family: 'Open Sans', sans-serif;
            background: linear-gradient(120deg, #e0e7ff 0%, #f8f9fe 100%);
        }
        .modal-content {
            background: #fff;
            padding: 40px 48px 32px 48px;
            border-radius: 18px;
            box-shadow: 0 8px 32px rgba(44,62,80,0.18);
            max-width: 700px;
            width: 98vw;
            margin: 48px auto;
            position: relative;
            animation: fadeIn 0.7s cubic-bezier(.4,0,.2,1);
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(40px); }
            to { opacity: 1; transform: translateY(0); }
        }
        h2 {
            color: #00338e;
            margin-bottom: 28px;
            text-align: center;
            font-size: 2rem;
            letter-spacing: 1px;
        }
        label {
            color: #00338e;
            font-weight: 600;
            margin-bottom: 4px;
        }
        input, select, textarea {
            width: 100%;
            padding: 12px 14px;
            border: 1.5px solid #d1d5db;
            border-radius: 8px;
            font-size: 15px;
            background: #f6f9fc;
            margin-bottom: 16px;
            transition: border 0.2s;
        }
        input[readonly], select[readonly], textarea[readonly] {
            background: #f0f4fa;
            color: #888;
            border: 1.5px solid #e0e7ff;
        }
        .form-section {
            background: #f8f9fe;
            border-radius: 14px;
            padding: 22px 22px 10px 22px;
            margin-bottom: 22px;
            box-shadow: 0 2px 8px rgba(44,62,80,0.04);
        }
        .form-title {
            font-size: 18px;
            font-weight: 700;
            color: #00338e;
            margin-bottom: 18px;
            letter-spacing: 0.5px;
        }
        .form-row {
            display: flex;
            flex-direction: column;
            gap: 0;
            margin-bottom: 12px;
        }
        .form-group {
            margin-bottom: 12px;
        }
        .form-actions {
            display: flex;
            justify-content: flex-end;
            gap: 16px;
            margin-top: 18px;
        }
        .btn-cancel {
            background: linear-gradient(90deg, #00338e 0%, #54a8c9 100%);
            color: #fff;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 700;
            padding: 12px 36px;
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(44,62,80,0.08);
            transition: background 0.2s, box-shadow 0.2s;
        }
        .btn-cancel:hover {
            background: linear-gradient(90deg, #00338e 0%, #0c007c 100%);
            box-shadow: 0 4px 16px rgba(44,62,80,0.13);
        }
        .close-x {
            position: absolute;
            top: 18px;
            right: 24px;
            font-size: 26px;
            color: #00338e;
            cursor: pointer;
            font-weight: bold;
            transition: color 0.2s;
        }
        .close-x:hover {
            color: #f5365c;
        }
        @media (max-width: 900px) {
            .modal-content { padding: 12px 2vw; }
            .form-row { flex-direction: column; gap: 0; }
        }
    </style>
</head>
<body>
  <div class="modal-content">
    <div id="status-section" style="margin-bottom: 24px;"></div>
    <span class="close-x" onclick="window.history.back()">&times;</span>
    <h2>Détails de la demande</h2>
    <form id="modalForm">
      <div class="form-section">
        <div class="form-title">Information Personnelle</div>
        <div class="form-row">
          <div class="form-group">
            <label for="modal_nom">Nom *</label>
            <input type="text" id="modal_nom" name="nom" readonly>
          </div>
          <div class="form-group">
            <label for="modal_prenom">Prénom *</label>
            <input type="text" id="modal_prenom" name="prenom" readonly>
          </div>
          <div class="form-group">
            <label for="modal_cin">Cin / Passport *</label>
            <input type="text" id="modal_cin" name="cin" readonly>
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label for="modal_societe">Société *</label>
            <input type="text" id="modal_societe" name="societe" readonly>
          </div>
          <div class="form-group">
            <label for="modal_statut">Statut *</label>
            <input type="text" id="modal_statut" name="statut" readonly>
          </div>
          <div class="form-group">
            <label for="modal_mission">Mission *</label>
            <input type="text" id="modal_mission" name="mission" readonly>
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label for="modal_projet">Projet *</label>
            <input type="text" id="modal_projet" name="projet" readonly>
          </div>
          <div class="form-group">
            <label for="modal_datedebut">Date de début *</label>
            <input type="date" id="modal_datedebut" name="datedebut" readonly>
          </div>
          <div class="form-group">
            <label for="modal_datefin">Date de fin *</label>
            <input type="date" id="modal_datefin" name="datefin" readonly>
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label for="modal_telephone">Téléphone *</label>
            <input type="text" id="modal_telephone" name="telephone" readonly>
          </div>
          <div class="form-group">
            <label for="modal_nationalite">Nationalité *</label>
            <input type="text" id="modal_nationalite" name="nationalite" readonly>
          </div>
        </div>
      </div>
      <div class="form-section" id="vehicule-section">
        <div class="form-title">Avez-vous une voiture ?</div>
        <div class="form-row">
          <div class="form-group">
            <label for="modal_marque">Marque</label>
            <input type="text" id="modal_marque" name="marque" readonly>
          </div>
          <div class="form-group">
            <label for="modal_modele">Modèle</label>
            <input type="text" id="modal_modele" name="modele" readonly>
          </div>
          <div class="form-group">
            <label for="modal_matricule">Matricule *</label>
            <input type="text" id="modal_matricule" name="matricule" readonly>
          </div>
          <div class="form-group">
            <label for="modal_couleur">Couleur</label>
            <input type="text" id="modal_couleur" name="couleur" readonly>
          </div>
        </div>
      </div>
      <div class="form-section" id="apport-section">
        <div class="form-title">Apportez-vous quelque chose ?</div>
        <div class="form-row">
          <div class="form-group">
            <label for="modal_apportType">Type d'objet</label>
            <input type="text" id="modal_apportType" name="apportType" readonly>
          </div>
        </div>
      </div>
      <div class="form-actions">
        <button type="button" class="btn-cancel" onclick="window.history.back()">Fermer</button>
      </div>
    </form>
  </div>
  <script>
const requests = [
  {
    nom: 'EL Amrani', prenom: 'Samir', cin: 'Q508674', societe: 'JESA', statut: 'Employé', mission: 'Supervision', projet: 'Laayoune Washing Plant', datedebut: '2025-06-01', datefin: '2025-06-10', telephone: '0600000000', nationalite: 'Marocain', voiture: 'oui', marque: 'Renault', modele: 'Clio', matricule: '1234-أ-56', couleur: 'Blanc', apport: 'oui', apportType: 'Valise', status: 'Validé', approver: '', refusalReason: ''
  },
  {
    nom: 'BEN ALI', prenom: 'YASSINE', cin: 'B123456', societe: 'SEPROB', statut: 'Consultant', mission: 'Audit', projet: 'PFC TSP', datedebut: '2025-06-05', datefin: '2025-06-15', telephone: '0611111111', nationalite: 'Marocain', voiture: 'non', marque: '', modele: '', matricule: '', couleur: '', apport: 'non', apportType: '', status: 'En attente', approver: 'Khaoula AYOUCH', refusalReason: ''
  },
  {
    nom: 'AMINE', prenom: 'FATIMA', cin: 'C987654', societe: 'AGNV', statut: 'Fournisseur', mission: 'Livraison', projet: 'PFC PAP', datedebut: '2025-06-10', datefin: '2025-06-20', telephone: '0622222222', nationalite: 'Etranger', voiture: 'oui', marque: 'Toyota', modele: 'Corolla', matricule: '5678-ب-90', couleur: 'Noir', apport: 'oui', apportType: 'EPI', status: 'Refusé', approver: '', refusalReason: 'Pièce justificative manquante'
  }
];
function getRequestIdFromUrl() {
  const params = new URLSearchParams(window.location.search);
  return parseInt(params.get('id'), 10) || 0;
}
window.onload = function() {
  const id = getRequestIdFromUrl();
  const req = requests[id] || requests[0];
  // Status section logic
  const statusSection = document.getElementById('status-section');
  if (req.status === 'En attente') {
    statusSection.innerHTML = `<div style="background:#ffe600;color:#222;padding:10px 20px;border-radius:8px;font-weight:700;font-size:1.1rem;display:inline-block;">En attente - Approver: <span style='color:#00338e;'>${req.approver}</span></div>`;
  } else if (req.status === 'Validé') {
    statusSection.innerHTML = `<div style="background:#2dce89;color:#fff;padding:10px 20px;border-radius:8px;font-weight:700;font-size:1.1rem;display:inline-block;">Validé</div>`;
  } else if (req.status === 'Refusé') {
    statusSection.innerHTML = `<div style="background:#f70303;color:#fff;padding:10px 20px;border-radius:8px;font-weight:700;font-size:1.1rem;display:inline-block;">Refusé</div><div style='margin-top:8px;color:#f70303;font-weight:600;'>Raison: ${req.refusalReason}</div>`;
  }
  document.getElementById('modal_nom').value = req.nom;
  document.getElementById('modal_prenom').value = req.prenom;
  document.getElementById('modal_cin').value = req.cin;
  document.getElementById('modal_societe').value = req.societe;
  document.getElementById('modal_statut').value = req.statut;
  document.getElementById('modal_mission').value = req.mission;
  document.getElementById('modal_projet').value = req.projet;
  document.getElementById('modal_datedebut').value = req.datedebut;
  document.getElementById('modal_datefin').value = req.datefin;
  document.getElementById('modal_telephone').value = req.telephone;
  document.getElementById('modal_nationalite').value = req.nationalite;
  // Vehicle section show/hide
  if(req.voiture === 'oui') {
    document.getElementById('vehicule-section').style.display = '';
    document.getElementById('modal_marque').value = req.marque;
    document.getElementById('modal_modele').value = req.modele;
    document.getElementById('modal_matricule').value = req.matricule;
    document.getElementById('modal_couleur').value = req.couleur;
  } else {
    document.getElementById('vehicule-section').style.display = 'none';
  }
  // Apport section show/hide
  if(req.apport === 'oui') {
    document.getElementById('apport-section').style.display = '';
    document.getElementById('modal_apportType').value = req.apportType;
  } else {
    document.getElementById('apport-section').style.display = 'none';
  }
};
</script>
</body>
</html>
